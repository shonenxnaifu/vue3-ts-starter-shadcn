# Mock Data Setup for API Endpoints

This document explains how to work with mock data generated by the Prism mock server based on your OpenAPI specification.

## Overview

The mock server generates responses based on the schema defined in your Swagger file. This document details how to work with the generated mock data.

## Understanding Prism's Default Behavior

By default, Prism generates mock responses based on the schema definitions in your OpenAPI/Swagger specification. When you make a request to an endpoint, Prism creates sample data that conforms to the schema defined in your `docs/swagger.json` file.

For the `/backoffice/api/v1/users` endpoint, the response structure follows the schema defined in your swagger file, which typically includes fields like:
- id
- name/email
- role
- type
- active status
- timestamps

## Current Response Format

When you make a request to the users endpoint, you'll receive data that looks like:

```json
{
  "code": "string",
  "data": [
    {
      "active": true,
      "created": "string",
      "email": "string",
      "full_name": "string",
      "id": "string",
      "max_concurrent_session": 0,
      "mitra": {
        "code": "string",
        "id": "string",
        "name": "string"
      },
      "phone_number": "string",
      "role": {
        "id": 0,
        "name": "string"
      }
    }
  ],
  "message": "string",
  "meta": {
    "page": 0,
    "size": 0,
    "total_items": 0,
    "total_pages": 0
  },
  "time": "string"
}
```

## Enhancing Your OpenAPI Specification for Pagination

To get proper mock data with pagination from Prism, you need to enhance your `docs/swagger.json` file with detailed examples in the schema definition. Prism prioritizes the schema in the OpenAPI specification over custom configurations in the .prismrc.yml file.

For the `/backoffice/api/v1/users` endpoint, you would need to update the response schema in your swagger.json to include example values that demonstrate pagination:

```json
{
  "paths": {
    "/backoffice/api/v1/users": {
      "get": {
        "responses": {
          "200": {
            "description": "List of users with pagination",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "200"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "1"
                          },
                          "full_name": {
                            "type": "string",
                            "example": "John Doe"
                          },
                          "email": {
                            "type": "string",
                            "example": "john.doe@example.com"
                          },
                          "role": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "integer",
                                "example": 1
                              },
                              "name": {
                                "type": "string",
                                "example": "admin"
                              }
                            }
                          },
                          "type": {
                            "type": "string",
                            "example": "internal"
                          },
                          "active": {
                            "type": "boolean",
                            "example": true
                          },
                          "created": {
                            "type": "string",
                            "example": "2023-01-01T00:00:00Z"
                          },
                          "phone_number": {
                            "type": "string",
                            "example": "+1234567890"
                          },
                          "max_concurrent_session": {
                            "type": "integer",
                            "example": 3
                          },
                          "mitra": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string",
                                "example": "1"
                              },
                              "name": {
                                "type": "string",
                                "example": "Sample Mitra"
                              },
                              "code": {
                                "type": "string",
                                "example": "SM001"
                              }
                            }
                          }
                        }
                      }
                    },
                    "message": {
                      "type": "string",
                      "example": "Success"
                    },
                    "meta": {
                      "type": "object",
                      "properties": {
                        "page": {
                          "type": "integer",
                          "example": 0
                        },
                        "size": {
                          "type": "integer",
                          "example": 10
                        },
                        "total_items": {
                          "type": "integer",
                          "example": 50
                        },
                        "total_pages": {
                          "type": "integer",
                          "example": 5
                        }
                      }
                    },
                    "time": {
                      "type": "string",
                      "example": "2023-01-01T00:00:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
```

This approach ensures that Prism generates consistent mock data that matches your pagination requirements.

## Testing the Endpoint

To test the users endpoint with pagination parameters:
```bash
# Get first page (page 0) with 10 items per page
curl -X GET "http://localhost:4010/backoffice/api/v1/users?type=internal&page=0&size=10" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer dummy-token"

# Get second page (page 1) with 10 items per page  
curl -X GET "http://localhost:4010/backoffice/api/v1/users?type=internal&page=1&size=10" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer dummy-token"
```

## Understanding the Pagination Parameters

- **Request parameters:**
  - `page`: Number of the page to retrieve (0-indexed)
  - `size`: Number of items per page (limit)

- **Response metadata:**
  - `page`: Current page number (0-indexed)
  - `size`: Number of items per page
  - `total_items`: Total number of users in the system (50)
  - `total_pages`: Total number of pages available (5)